<form script="st_lookup_gen.js" theme="dark" version="1.1">
  <label>Sourcetypes Analysis</label>
  <description>Monitor and analyze data source health</description>
  
<fieldset submitButton="false">
  <html>
    <!-- First Button -->
    <button id="refresh-lookup-btn" class="btn btn-primary" style="margin: 10px;">
      <i class="icon-rotate-counter"></i> Refresh Datasource Inventory - Use This For Current Inventory
    </button>
    
    <!-- Second Button -->
    <button id="refresh-sourcetype-btn" class="btn btn-primary" style="margin: 10px;">
      <i class="icon-rotate-counter"></i> Refresh Sourcetype State Run Once Only To Create State Lookup
    </button>
  </html>
</fieldset>


  <!-- Status Message Panel -->
  <row>
    <panel>
      <html>
        <div id="status-message" style="padding: 10px; margin: 10px; border-radius: 5px; display: none;">
          <span id="status-text"></span>
        </div>
      </html>
    </panel>
  </row>



 <!-- Show State Message Panel -->
  <row>
    <panel>
      <html>
        <div id="sourcetype-status-message" style="padding: 10px; margin: 10px; border-radius: 5px; display: none;">
          <span id="sourcetype-status-text"></span>
        </div>
      </html>
    </panel>
  </row>





  <!-- All Sourcetypes Stats -->
  <row>
    <panel>
      <title>All Sourcetypes Inventory</title>
      <table>
        <search>
          <query>
		  | inputlookup iops_st_inv
		  | sort - count
          </query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </table>
    </panel>
  </row>
  
  <!-- Critical Sources (No Data in 30 mins) -->
  <row>
    <panel>
      <title>Critical: No Data in Last 30 Minutes  NEED TO FIX</title>
      <table>
        <search>
          <query>
| inputlookup iops_st_inv

          </query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <format type="color" field="age_minutes">
          <colorPalette type="minMidMax" maxColor="#DC4E41" minColor="#F1813F"></colorPalette>
        </format>
      </table>
    </panel>
  </row>
</form>
